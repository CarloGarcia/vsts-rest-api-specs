{
  "swagger": "2.0",
  "info": {
    "title": "MEMInternal",
    "description": "",
    "termsOfService": "https://go.microsoft.com/fwlink/?LinkId=329770",
    "contact": {
      "name": "nugetvss",
      "email": "nugetvss@microsoft.com"
    },
    "license": {
      "name": "MICROSOFT SOFTWARE LICENSE TERMS",
      "url": "https://go.microsoft.com/fwlink/?LinkId=329770"
    },
    "version": "3.1"
  },
  "host": "fabrikam-fiber-inc.visualstudio.com",
  "basePath": "/",
  "tags": [
    {
      "name": "editUserExtensionsBootstrap"
    },
    {
      "name": "export"
    },
    {
      "name": "inviteUsersBootstrap"
    },
    {
      "name": "licenseCheck"
    },
    {
      "name": "userManagementSummary"
    },
    {
      "name": "users"
    }
  ],
  "schemes": [
    "https"
  ],
  "paths": {
    "/_apis/meminternal/edituserextensionsbootstrap": {
      "get": {
        "tags": [
          "editUserExtensionsBootstrap"
        ],
        "summary": "GetEditUserExtensionsBootstrapData",
        "description": "",
        "operationId": "getEditUserExtensionsBootstrapData",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Extension"
              }
            }
          }
        }
      }
    },
    "/_apis/meminternal/export": {
      "get": {
        "tags": [
          "export"
        ],
        "summary": "ExportUsersToCSV",
        "description": "",
        "operationId": "exportUsersToCSV",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "string",
              "format": "Stream"
            }
          }
        }
      }
    },
    "/_apis/meminternal/inviteusersbootstrap": {
      "get": {
        "tags": [
          "inviteUsersBootstrap"
        ],
        "summary": "GetInviteFlowBootstrapData",
        "description": "",
        "operationId": "getInviteFlowBootstrapData",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/InviteFlowBootstrapData"
            }
          }
        }
      }
    },
    "/_apis/meminternal/licensecheck": {
      "post": {
        "tags": [
          "licenseCheck"
        ],
        "summary": "GetUsersNeedingLicenseUpgrade",
        "description": "Gets the users who will get their license upgraded if added to a project with a role other than Project Manager. Also gets the users who are already in one of the selected projects.",
        "operationId": "getUsersNeedingLicenseUpgrade",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/User"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/AddUsersPreCheckResponse"
            }
          }
        }
      }
    },
    "/_apis/meminternal/usermanagementsummary": {
      "get": {
        "tags": [
          "userManagementSummary"
        ],
        "summary": "GetUsersSummary",
        "description": "",
        "operationId": "getUsersSummary",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/UsersSummary"
            }
          }
        }
      }
    },
    "/_apis/meminternal/users": {
      "post": {
        "tags": [
          "users"
        ],
        "summary": "AddUsers",
        "description": "Used to add users to a project in an account. It adds them to groups, assigns licenses, and assigns extensions.",
        "operationId": "addUsers",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/User"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/AddUsersResponse"
            }
          }
        }
      },
      "get": {
        "tags": [
          "users"
        ],
        "summary": "GetUsers",
        "description": "Used to get user information in an account or team",
        "operationId": "getUsers",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "top",
            "description": "",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "skip",
            "description": "",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/User"
              }
            }
          }
        }
      }
    },
    "/_apis/meminternal/users/{userId}": {
      "delete": {
        "tags": [
          "users"
        ],
        "summary": "DeleteUser",
        "description": "Deletes users from an account/collection",
        "operationId": "deleteUser",
        "parameters": [
          {
            "in": "path",
            "name": "userId",
            "description": "",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation"
          }
        }
      },
      "patch": {
        "tags": [
          "users"
        ],
        "summary": "EditUser",
        "description": "Used to assign license, extensions are projects.",
        "operationId": "editUser",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "",
            "required": true,
            "schema": {
              "$ref": "#/definitions/User"
            }
          },
          {
            "in": "path",
            "name": "userId",
            "description": "",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        }
      },
      "get": {
        "tags": [
          "users"
        ],
        "summary": "GetUser",
        "description": "Used to get a single user information in an account or team",
        "operationId": "getUser",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "userId",
            "description": "",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "AccessLevel": {
      "type": "object",
      "properties": {
        "accountLicenseType": {
          "type": "string",
          "format": "AccountLicenseType"
        },
        "licenseDisplayName": {
          "type": "string"
        },
        "licensingSource": {
          "type": "string",
          "format": "LicensingSource"
        }
      }
    },
    "AddUsersPreCheckResponse": {
      "type": "object",
      "properties": {
        "usersAlreadyInProject": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/User"
          }
        },
        "usersNeedingLicenseUpgrade": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/User"
          }
        }
      }
    },
    "AddUsersResponse": {
      "type": "object",
      "properties": {
        "addedUsers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/User"
          }
        },
        "errorCode": {
          "type": "integer",
          "format": "int32"
        },
        "errorMessage": {
          "type": "string"
        },
        "failedAddedUsers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/UserErrorModel"
          }
        },
        "hasErrors": {
          "type": "boolean"
        },
        "warningMessages": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Extension": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "minimumLicenseRequired": {
          "type": "string",
          "format": "MinimumRequiredServiceLevel"
        },
        "name": {
          "type": "string"
        },
        "quantity": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "ExtensionSummaryData": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/SummaryData"
        }
      ],
      "properties": {
        "extensionId": {
          "type": "string"
        },
        "extensionName": {
          "type": "string"
        },
        "isTrialVersion": {
          "type": "boolean"
        }
      }
    },
    "FailedExtensionAssignment": {
      "type": "object",
      "properties": {
        "extensionId": {
          "description": "ID of the extension",
          "type": "string"
        },
        "reason": {
          "description": "Reason of the assigning failure",
          "type": "string"
        }
      }
    },
    "InviteFlowBootstrapData": {
      "type": "object",
      "properties": {
        "extensions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ExtensionSummaryData"
          }
        },
        "projects": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Project"
          }
        }
      }
    },
    "LicenseSummaryData": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/SummaryData"
        }
      ],
      "properties": {
        "licenseName": {
          "type": "string"
        },
        "licenseType": {
          "enum": [
            "unknown",
            "free",
            "paid",
            "earlyAdopter",
            "stakeholder",
            "vSEnterprise",
            "vSProfessional",
            "vSTestProfessional",
            "vSPlatforms",
            "invitedSubscriber"
          ],
          "x-ms-enum": {
            "name": "Microsoft.VisualStudio.Services.MemberEntitlementManagement.WebApi.Internal.LicenseType"
          }
        }
      }
    },
    "Project": {
      "type": "object",
      "properties": {
        "groups": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "Group"
          }
        },
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "isProjectPermissionInherited": {
          "type": "boolean"
        },
        "name": {
          "type": "string"
        }
      }
    },
    "SummaryData": {
      "type": "object",
      "properties": {
        "assigned": {
          "type": "integer",
          "format": "int32"
        },
        "available": {
          "type": "integer",
          "format": "int32"
        },
        "total": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "User": {
      "type": "object",
      "properties": {
        "accessLevel": {
          "description": "User access level Collection-level context Not required in PUT/POST/PATCH requests",
          "$ref": "#/definitions/AccessLevel"
        },
        "displayName": {
          "description": "User display name All-level contexts",
          "type": "string"
        },
        "extensions": {
          "description": "User extensions Collection-level context Not required in PUT/POST/PATCH requests",
          "type": "array",
          "items": {
            "$ref": "#/definitions/UserExtension"
          }
        },
        "isExternalUser": {
          "description": "User provider type true if AAD, false if MSA backed account",
          "type": "boolean"
        },
        "lastAccessedDate": {
          "description": "User last accessed date Collection-level context Not required in PUT/POST/PATCH requests",
          "type": "string",
          "format": "date-time"
        },
        "localId": {
          "description": "VSTS local Id All-level contexts",
          "type": "string",
          "format": "uuid"
        },
        "originId": {
          "description": "Email Provider Id All-level contexts",
          "type": "string",
          "format": "uuid"
        },
        "providerEmail": {
          "type": "string"
        },
        "userProjects": {
          "description": "User projects Collection-level context Not required in PUT/PATCH requests",
          "type": "array",
          "items": {
            "$ref": "#/definitions/UserProject"
          }
        }
      }
    },
    "UserErrorModel": {
      "type": "object",
      "properties": {
        "errorCode": {
          "type": "integer",
          "format": "int32"
        },
        "errorMessage": {
          "type": "string"
        },
        "user": {
          "$ref": "#/definitions/User"
        }
      }
    },
    "UserExtension": {
      "type": "object",
      "properties": {
        "extensionId": {
          "type": "string"
        },
        "isAssigned": {
          "type": "boolean"
        }
      }
    },
    "UserProject": {
      "type": "object",
      "properties": {
        "isMember": {
          "type": "boolean"
        },
        "project": {
          "$ref": "#/definitions/Project"
        }
      }
    },
    "UsersSummary": {
      "type": "object",
      "properties": {
        "extensions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ExtensionSummaryData"
          }
        },
        "licenses": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/LicenseSummaryData"
          }
        }
      }
    }
  },
  "parameters": {
    "api-Version": {
      "name": "api-version",
      "in": "query",
      "description": "Version of the API to use.  This should be set to '3.1-preview' to use this version of the api.",
      "required": true,
      "type": "string"
    }
  },
  "securityDefinitions": {
    "accessToken": {
      "type": "basic",
      "description": "Personal access token. Use any value for the user name and the token as the password."
     }
  },
  "security": [
    {
      "accessToken": []
    }
  ],
  "externalDocs": {
    "description": "Visual Studio Team Services REST APIs",
    "url": "https://www.visualstudio.com/docs/integrate/api/overview"
  }
}